<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Oscilloscope Simulator</title>
  <style>
    :root{--bg:#e8fbff;--card:#ffffff;--accent:#06a8d9;--muted:#6b7280}
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef9ff);color:#0f172a}
    header{background:linear-gradient(90deg,var(--accent),#6fd7ff);padding:28px 20px;color:white;text-align:center}
    .wrap{max-width:830px;margin:22px auto;padding:0 18px}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(6,168,217,0.08)}
    label{font-size:13px}
    .controls{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    input[type=range]{width:100%}
    select{padding:6px;border-radius:6px;border:1px solid #d1e9f5}
    .btn{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
    .small{font-size:12px;color:var(--muted)}
    .back{display:inline-block;margin-bottom:10px;color:var(--accent);text-decoration:none}
  </style>
</head>
<body>
  <header>
    <h1>Oscilloscope Interactive Simulator</h1>
  </header>

  <main class="wrap">
    <a href="oscilloscope_info.html" class="back">‚Üê Back to Information</a>
    <section class="card">
      <canvas id="scope-canvas" width="760" height="300"></canvas>

      <div class="controls">
        <div>
          <label>Waveform</label>
          <select id="waveType">
            <option value="sine">Sine</option>
            <option value="square">Square</option>
            <option value="triangle">Triangle</option>
            <option value="saw">Sawtooth</option>
            <option value="noise">Noise</option>
          </select>
        </div>

        <div>
          <label>Amplitude (V peak)</label>
          <input type="range" id="amplitude" min="0" max="10" step="0.1" value="2">
          <div class="small"><span id="ampVal">2.0</span> V</div>
        </div>

        <div>
          <label>Frequency (Hz)</label>
          <input type="range" id="frequency" min="0.5" max="100" step="0.5" value="5">
          <div class="small"><span id="freqVal">5</span> Hz</div>
        </div>

        <div>
          <label>Timebase (ms/div)</label>
          <select id="timebase">
            <option value="1">1 ms/div</option>
            <option value="5">5 ms/div</option>
            <option value="10" selected>10 ms/div</option>
            <option value="50">50 ms/div</option>
          </select>
        </div>

        <div>
          <label>Offset (V)</label>
          <input type="range" id="offset" min="-5" max="5" step="0.1" value="0">
          <div class="small"><span id="offVal">0.0</span> V</div>
        </div>

        <div>
          <label>Trigger (V)</label>
          <input type="range" id="trigger" min="-5" max="5" step="0.1" value="0">
          <div class="small">Level: <span id="trigVal">0.0</span> V</div>
        </div>
      </div>

      <div style="margin-top:10px;text-align:center">
        <button id="runBtn" class="btn">Run</button>
      </div>

      <p class="small" style="margin-top:10px;text-align:center">Adjust values to see waveform changes in real-time.</p>
    </section>
  </main>

  <script>
    const canvas = document.getElementById('scope-canvas');
    const ctx = canvas.getContext('2d');
    let W = canvas.width, H = canvas.height;

    const amp = document.getElementById('amplitude');
    const freq = document.getElementById('frequency');
    const ampVal = document.getElementById('ampVal');
    const freqVal = document.getElementById('freqVal');
    const offset = document.getElementById('offset');
    const offVal = document.getElementById('offVal');
    const trigger = document.getElementById('trigger');
    const trigVal = document.getElementById('trigVal');
    const waveType = document.getElementById('waveType');
    const timebase = document.getElementById('timebase');
    const runBtn = document.getElementById('runBtn');

    amp.oninput = ()=> ampVal.textContent = amp.value;
    freq.oninput = ()=> freqVal.textContent = freq.value;
    offset.oninput = ()=> offVal.textContent = offset.value;
    trigger.oninput = ()=> trigVal.textContent = trigger.value;

    let running = true;
    runBtn.onclick = ()=>{ running = !running; runBtn.textContent = running ? 'Pause' : 'Run'; if(running) draw(); };

    function waveform(type, phase){
      switch(type){
        case 'sine': return Math.sin(phase);
        case 'square': return Math.sign(Math.sin(phase)) || 1;
        case 'triangle': return 2*Math.asin(Math.sin(phase))/Math.PI;
        case 'saw': return 2*(phase/(2*Math.PI)-Math.floor(phase/(2*Math.PI)+0.5));
        case 'noise': return Math.random()*2-1;
        default: return 0;
      }
    }

    function drawGrid(){
      ctx.fillStyle = '#031426';
      ctx.fillRect(0,0,W,H);
      ctx.strokeStyle='rgba(255,255,255,0.1)';
      for(let i=0;i<=10;i++){
        const x = i*(W/10); ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,H); ctx.stroke();
      }
      for(let j=0;j<=8;j++){
        const y = j*(H/8); ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(W,y); ctx.stroke();
      }
    }

    function draw(){
      drawGrid();
      const A = parseFloat(amp.value);
      const f = parseFloat(freq.value);
      const off = parseFloat(offset.value);
      const tb = parseFloat(timebase.value)/1000;
      const trig = parseFloat(trigger.value);
      const type = waveType.value;
      const now = performance.now()/1000;

      ctx.beginPath();
      for(let x=0;x<W;x++){
        const t = x/W * tb*10;
        const ph = 2*Math.PI*f*(t+now);
        const v = A*waveform(type,ph)+off;
        const y = H/2 - v*(H/8);
        x===0 ? ctx.moveTo(x,y):ctx.lineTo(x,y);
      }
      ctx.strokeStyle='#00ffea'; ctx.lineWidth=2; ctx.stroke();

      if(running) requestAnimationFrame(draw);
    }

    draw();
  </script>
</body>
</html>

